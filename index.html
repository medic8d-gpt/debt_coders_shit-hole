<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magic Drawing Board</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      overflow: hidden;
      /* Prevent scrolling */
    }

    /* Custom styles for the glowing effect and responsive canvas */
    canvas {
      cursor: crosshair;
      display: block;
    }

    .main-container {
      touch-action: none;
      /* Disable browser gestures like pull-to-refresh on the drawing area */
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body class="bg-gray-900 text-white flex items-center justify-center">

  <div class="main-container relative">
    <!-- Canvas for drawing -->
    <canvas id="drawingBoard"></canvas>

    <!-- Control buttons -->
    <div class="absolute top-4 right-4 flex space-x-2">
      <button id="clearButton"
        class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75">
        Clear
      </button>
    </div>

    <!-- Initial instruction text -->
    <div id="instructionText"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-400 text-2xl font-medium pointer-events-none">
      Click (or tap) and drag to draw
    </div>
  </div>

  <script>
    const canvas = document.getElementById('drawingBoard');
    const ctx = canvas.getContext('2d');
    const clearButton = document.getElementById('clearButton');
    const instructionText = document.getElementById('instructionText');

    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;
    let hue = 0;

    // Set canvas size to full viewport
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      // Redrawing on resize could be implemented here if needed
    }

    // Set initial size and listen for window resize
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function draw(e) {
      if (!isDrawing) return; // Stop the function if not drawing

      // Hide instruction text on first draw
      if (instructionText) {
        instructionText.style.display = 'none';
      }

      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';

      // Glow effect by drawing multiple lines with decreasing opacity and width
      for (let i = 10; i >= 0; i--) {
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        // Use clientX/Y for mouse and touches[0] for touch events
        const currentX = e.clientX || e.touches[0].clientX;
        const currentY = e.clientY || e.touches[0].clientY;
        ctx.lineTo(currentX, currentY);

        ctx.strokeStyle = `hsla(${hue}, 100%, 50%, ${0.1 - i * 0.01})`;
        ctx.lineWidth = i * 4;
        ctx.stroke();
      }

      // Update last coordinates
      [lastX, lastY] = [e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY];

      // Increment hue for the rainbow effect
      hue++;
      if (hue >= 360) {
        hue = 0;
      }
    }

    function startDrawing(e) {
      isDrawing = true;
      [lastX, lastY] = [e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY];
    }

    function stopDrawing() {
      isDrawing = false;
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (instructionText) {
        instructionText.style.display = 'block';
      }
    }

    // Mouse event listeners
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', stopDrawing);
    canvas.addEventListener('mouseout', stopDrawing); // Stop drawing if mouse leaves canvas

    // Touch event listeners for mobile devices
    canvas.addEventListener('touchstart', (e) => {
      // Prevent default touch behavior (like scrolling)
      e.preventDefault();
      startDrawing(e);
    }, { passive: false });

    canvas.addEventListener('touchmove', (e) => {
      e.preventDefault();
      draw(e);
    }, { passive: false });

    canvas.addEventListener('touchend', stopDrawing);

    // Clear button functionality
    clearButton.addEventListener('click', clearCanvas);
  </script>

</body>

</html>
